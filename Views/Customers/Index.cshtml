@using EShift.Models
@model IEnumerable<Customer>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<!-- Navbar -->
<nav class="fixed top-0 left-0 right-0 bg-gray-900 text-white z-50 shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
            <img src="/images/logo.png" class="h-8 w-8" alt="e-Shift Logo">
            <span class="text-red-500 font-bold text-xl">e-Shift</span>
        </div>
        <div class="flex space-x-6 items-center">
            <a href="/Customers/Profile" class="hover:text-orange-400">Profile</a>
           
            <partial name="_LoginPartial" />

        </div>
    </div>
</nav>

<!-- Hero Section -->
<section class="pt-28 pb-12 bg-cover bg-center text-white text-center hero relative" style="background-image: url('https://images.pexels.com/photos/6169056/pexels-photo-6169056.jpeg');">
    <div class="absolute inset-0 bg-black bg-opacity-60 z-0"></div>
    <div class="relative z-10 max-w-7xl mx-auto px-4">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-4">Welcome to Your e-Shift Dashboard</h1>
        <p class="text-lg text-gray-200 mb-8">Manage your profile, book jobs, and track your moves with ease.</p>
    </div>
</section>

<!-- Main Content -->
<div class="max-w-7xl mx-auto px-4 py-12">

    <!-- Feedback Messages -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="mb-6 p-4 bg-green-100 text-green-700 rounded-lg">
            @TempData["SuccessMessage"]
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="mb-6 p-4 bg-red-100 text-red-700 rounded-lg">
            @TempData["ErrorMessage"]
        </div>
    }

    <!-- Job Management -->
    <section id="jobs">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Job Management</h2>
        <div class="bg-white p-8 rounded-lg shadow-lg">

            <h3 class="text-xl font-semibold mb-4">Create New Shifting Request</h3>
            <form asp-action="CreateJob" asp-controller="Customers" method="post" enctype="multipart/form-data" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Basic Info -->
                <div>
                    <label for="CustomerName" class="block text-sm font-medium text-gray-700">Full Name *</label>
                    <input id="CustomerName" name="CustomerName" type="text" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>
                <div>
                    <label for="PhoneNumber" class="block text-sm font-medium text-gray-700">Phone Number *</label>
                    <input id="PhoneNumber" name="PhoneNumber" type="tel" required pattern="[0-9]{10,15}" class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>
                <div>
                    <label for="Email" class="block text-sm font-medium text-gray-700">Email Address *</label>
                    <input id="Email" name="Email" type="email" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>

                <!-- Addresses -->
                <div>
                    <label for="PickupAddress" class="block text-sm font-medium text-gray-700">Pickup Address *</label>
                    <input id="PickupAddress" name="PickupAddress" type="text" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>
                <div>
                    <label for="DeliveryAddress" class="block text-sm font-medium text-gray-700">Delivery Address *</label>
                    <input id="DeliveryAddress" name="DeliveryAddress" type="text" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>

                <!-- Schedule & Items -->
                <div>
                    <label for="MoveDate" class="block text-sm font-medium text-gray-700">Move Date *</label>
                    <input id="MoveDate" name="MoveDate" type="date" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>
                <div>
                    <label for="MoveTime" class="block text-sm font-medium text-gray-700">Preferred Time *</label>
                    <select id="MoveTime" name="MoveTime" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400">
                        <option disabled selected>Select Time Slot</option>
                        <option>Morning (08:00 - 12:00)</option>
                        <option>Afternoon (12:00 - 16:00)</option>
                        <option>Evening (16:00 - 20:00)</option>
                    </select>
                </div>
                <div>
                    <label for="Category" class="block text-sm font-medium text-gray-700">Item Category *</label>
                    <select id="Category" name="Category" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400">
                        <option disabled selected>Select Category</option>
                        <option>Furniture</option>
                        <option>Electronics</option>
                        <option>Appliances</option>
                        <option>Clothing</option>
                        <option>Other</option>
                    </select>
                </div>
                <div>
                    <label for="ItemCount" class="block text-sm font-medium text-gray-700">Number of Items *</label>
                    <input id="ItemCount" name="ItemCount" type="number" min="1" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />
                </div>
                <div>
                    <label for="EstimatedKg" class="block text-sm font-medium text-gray-700">Estimated Weight (KG) *</label>
                    <input id="EstimatedKg" name="EstimatedKg" type="number" step="0.1" min="0" required class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" />

                </div>
         

                <!-- Simplified: Removed optional fields to reduce complexity -->
                <div class="md:col-span-2">
                    <label for="Instructions" class="block text-sm font-medium text-gray-700">Special Instructions</label>
                    <textarea id="Instructions" name="Instructions" rows="4" class="mt-1 w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-400" placeholder="e.g., Elevator unavailable, narrow entrance, etc."></textarea>
                </div>

                <!-- Submit -->
                <div class="md:col-span-2">
                    <button type="submit" class="btn-primary btn-orange text-white px-6 py-3 rounded-full shadow-md hover:shadow-xl transition w-full md:w-auto">
                        Submit Request
                    </button>
                </div>
            </form>
            <!-- Active Jobs section -->
            <h3 class="text-xl font-semibold text-gray-900 mt-8 mb-4">Job History</h3>
            <div class="space-y-6">
                @{
                    var customer = Model.FirstOrDefault(); // Logged-in customer
                }
                @if (customer != null && customer.Jobs != null && customer.Jobs.Any())
                {
                    @foreach (var job in customer.Jobs)
                    {
                        <div class="border p-6 rounded-lg bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p><strong>Job ID:</strong> @job.JobId</p>
                                    <p><strong>Status:</strong> <span class="text-yellow-600">@job.Status</span></p>
                                    <p><strong>Estimated Arrival:</strong> @job.EstimatedArrival.ToString("yyyy-MM-dd HH:mm")</p>
                                </div>
                                <div class="flex space-x-4">
                                    <a asp-action="Details" asp-controller="Jobs" asp-route-jobId="@job.JobId" class="text-cyan-400 hover:underline">View Details</a>
                                    @if (job.Status == "Pending")
                                    {
                                        <form method="post" asp-action="Cancel" asp-controller="Jobs" asp-route-jobId="@job.JobId" onsubmit="return confirm('Are you sure you want to cancel this job?');">
                                            <button type="submit" class="text-red-500 hover:underline">Cancel</button>
                                        </form>
                                    }
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-cyan-400 h-3 rounded-full" style="width: @job.ProgressPercentage%"></div>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <p class="text-gray-600">No active jobs found.</p>
                }
            </div>
        </div>
    </section>
</div>

<!-- Footer -->
<footer id="contact" class="bg-gray-900 text-white py-10">
    <div class="max-w-7xl mx-auto px-4 text-center">
        <h3 class="text-2xl font-bold mb-2">Contact Us</h3>
        <p>Email: <a href="mailto:support@eshift.com" class="hover:text-cyan-400">support@eshift.com</a> | Phone: <a href="tel:+18001234567" class="hover:text-cyan-400">+1-800-123-4567</a></p>
        <div id="socials-container" class="flex justify-center space-x-4 mt-4">
            <a href="https://facebook.com/your-eshift-profile" target="_blank" rel="noopener noreferrer" aria-label="Follow e-Shift on Facebook">
                <img src="@Url.Content("~/images/icons8-facebook.svg")"
                     alt="e-Shift Facebook profile"
                     class="icon w-8 h-8"
                     onclick="location.href='https://facebook.com/your-eshift-profile'" />
            </a>
            <a href="https://instagram.com/your-eshift-profile" target="_blank" rel="noopener noreferrer" aria-label="Follow e-Shift on Instagram">
                <img src="@Url.Content("~/images/icons8-instagram.svg")"
                     alt="e-Shift Instagram profile"
                     class="icon w-8 h-8"
                     onclick="location.href='https://instagram.com/your-eshift-profile'" />
            </a>
            <a href="https://tiktok.com/your-eshift-profile" target="_blank" rel="noopener noreferrer" aria-label="Follow e-Shift on TikTok">
                <img src="@Url.Content("~/images/icons8-tiktok.svg")"
                     alt="e-Shift TikTok profile"
                     class="icon w-8 h-8"
                     onclick="location.href='https://tiktok.com/your-eshift-profile'" />
            </a>
        </div>
        <p class="mt-4 text-gray-400">© 2025 e-Shift. All rights reserved.</p>
    </div>
</footer>

@section Scripts {
    <script src="~/js/site.js" asp-append-version="true"></script>
}
